{{#> layout-private }}
  {{#* inline "head" }}
    <title>List processes - BPM</title>

    <script src="/_bpm/resource/js/dom.js"></script>
    <script src="/_bpm/resource/js/modal/confirmation.js"></script>

    <!-- icons styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  {{/ inline }}

  {{#* inline "content" }}
    <div>
      <div class="position-middle">
        <div>
          <fieldset>
            <form action="/_bpm/save" method="post">
              <input type="text" name="pid" placeholder="Process id" autocomplete="off" />
              <button id="bpm-add-process">Add a new process</button>
            </form>

            <div class="list-container">
              {{# each list }}
                <div class="list-item">
                  <a href="/_bpm/process/{{ this }}">{{ this }}</a>

                  <form class="delete-process-form" action="/_bpm/delete/{{ this }}" method="post">
                    <button><span class="material-symbols-outlined">delete</span></button>
                  </form>
                </div>
              {{/ each }}
            </div>
          </fieldset>
        </div>
      </div>
    </div>
  {{/ inline }}

  {{#* inline "footer" }}
    <script>
      dom.select('.delete-process-form').on('submit', (event) =>
      {
        event.preventDefault()
        confirmation('Delete process', 'Are you sure you want to delete this process?').then((response) => response === 'accept' && event.target.submit())
      })
    </script>
  {{/ inline }}
{{/ layout-private }}